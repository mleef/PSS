<!DOCTYPE html>
<html style="min-width: 960x; margin: 0 auto;">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/json+oembed" href="https://www.jotform.com/oembed/?format=json&amp;url=http%3A%2F%2Fwww.jotform.com%2Fform%2F41884646115156" title="oEmbed Form"><link rel="alternate" type="text/xml+oembed" href="https://www.jotform.com/oembed/?format=xml&amp;url=http%3A%2F%2Fwww.jotform.com%2Fform%2F41884646115156" title="oEmbed Form">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<meta name="HandheldFriendly" content="true" />
<title>Probe Set Search</title>
<link rel="shortcut icon" href="http://www.google.com/s2/favicons?domain=www.affymetrix.com">
<link type="text/css" rel="stylesheet" href="css/styles/form.css?v3.2.2656"/>
<link type="text/css" rel="stylesheet" href="http://max.jotfor.ms/css/styles/nova.css" />
<link type="text/css" media="print" rel="stylesheet" href="http://max.jotfor.ms/css/printForm.css?3.2.2656" />
<!-- Include the heartcode canvasloader js file -->
<script src="http://heartcode-canvasloader.googlecode.com/files/heartcode-canvasloader-min-0.9.1.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>

<style type="text/css">
    body {
      margin: 0;
      color: #333;
      font: 12px/1.636em Arial, Helvetica, sans-serif;
      background: #f1f1f1;
      min-width: 1000px;
    }
    .form-label-left{
        width:150px !important;
    }
    .form-line{
        padding-top:12px;
        padding-bottom:12px;
    }
    .form-label-right{
        width:150px !important;
    }
    .form-all{
        margin: left auto;
        margin: right auto;
        width:590px;
        color:Black !important;
        font-family:'Lucida Grande','Lucida Sans Unicode','Lucida Sans','Verdana','Tahoma','sans-serif';
        font-size:14px;
    }

    #centered{
      width: 600px;
      height: 700px;
      text-align: center;
      border: 2px;
      border-radius: 25px;
      padding: 0;
      margin: 0 auto;
      background: #ffffff;
    }

    #status
    {
      display: inline-block;
      position:relative;
      font-family:'Lucida Grande','Lucida Sans Unicode','Lucida Sans','Verdana','Tahoma','sans-serif';
    }

    }
</style>

</head>
<body>
<div id="centered">
<form id="main" action="/upload" onsubmit= "return validate()" method="post" enctype="multipart/form-data" accept-charset="utf-8">
  <input type="hidden" name="formID" value="41884646115156" />
  <div class="form-all">
    <ul class="form-section">
      <li class="form-line" id="id_9">    
        <div id="cid_9" class="form-input-wide">
          <img alt="" class="form-image" src="images/affymetrix2014.jpg" height="128" width="531" />
        </div>
      </li>
      <li id="cid_1" class="form-input-wide">
        <div class="form-header-group">
          <h2 id="header_1" class="form-header">
            Probe Set Search
          </h2>
          <p>
          <div id="subHeader_1" class="form-subHeader">
            Upload sequences below for detailed probe set coverage information
          </div>
        </div>
      </li>
      <li class="form-line" id="id_8">
        <label class="form-label form-label-left form-label-auto" id="label_8" for="input_8">
          Chip Design:
          <span class="form-required">
            *
          </span>
        </label>
        <div id="cid_8" class="form-input">
          <select class="form-dropdown validate[required]" style="width:170px" id="input_8" name="q8_chipDesign">
            <option value="-1">Select design</option>
            <option disabled>WT Expression Arrays</option>
            <option value="1"> Human Exon 1.0 ST </option>
            <option value="4"> Human Gene 1.0 ST </option>
            <option value="712"> Human Gene 2.0 ST </option>
            <option value="725"> HTA 2.0 </option>
            <option value="2"> Mouse Exon 1.0 ST </option>
            <option value="5"> Mouse Gene 1.0 ST </option>
            <option value="715"> Mouse Gene 2.0 ST </option>
            <option value="3"> Rat Exon 1.0 ST </option>
            <option value="6"> Rat Gene 1.0 ST </option>
            <option value="718"> Rat Gene 2.0 ST </option>
            <option disabled>3' IVT Expression</option>
          </select>
        </div>
      </li>
      <li class="form-line" id="id_10">
        <label class="form-label form-label-left form-label-auto" id="label_10" for="input_10">
          Upload FASTA Files:
        </label>
        <div id="cid_10" class="form-input">
          <input style = "display: inline-block; width: 170px; " class="form-upload-multiple validate[required]" type="file" id="input_10" name="q10_fastaFiles[]" multiple="multiple"/>
        </div>
      </li>
      <li class="form-line" id="id_3">
          <label class="form-label form-label-left form-label-auto" id="label_3" for="input_3">
          Or Paste Sequences:
        </label>
        <div id="cid_3" class="form-input">
        <textarea id="pf" style="resize: none" rows="4" cols="21" name="pf" form="main"></textarea>
        </div>
      </li>

      <li class="form-line" id="id_2">
        <div id="cid_2" class="form-input-wide">
          <div class="form-buttons-wrapper">
            <button id="input_2" type="submit" class="form-submit-button">
              Submit query
            </button>
          </div>
        </div>
      </li>
    </ul>


  </div>
  </form>
    <!-- Create a div which will be the canvasloader wrapper -->  
  
   <div id="status"></div>
   <div id="canvasloader-container" class="wrapper"></div>
  <!-- This script creates a new CanvasLoader instance and places it in the wrapper div -->
  <script type="text/javascript">
    var designSelected = false
    var paste = false
    var fileSelected = false
    var valid = false
    var cl = new CanvasLoader('canvasloader-container');
    cl.setColor('#ff0000'); // default is '#000000'
    cl.setDiameter(78); // default is 40
    cl.setSpeed(3); // default is 2
    cl.setFPS(30); // default is 24
    var first = true

    $("#main").submit(function (event) {
      //cl.show(); // Hidden by default

      if(valid) {
        var myVar=setInterval(function(){statusCheck()},200);

        function statusCheck() {

          $.get("/status", function (data) {
              if(data["percentage"]) {
                $("#status").text(data["step"] + "..." + data["percentage"] + "% complete")
              }
              else {
                $("#status").text(data["step"])
              }
               if(first) {
                cl.show()
                first = false
              }
          })
        }
      }
  })




    $("#pf").on('change keyup paste', function() {
      if($("#pf").val().length > 0) {
        paste = true
      }
      else {
        paste = false
      }
    });

    $("#input_8").on('change', function () {
      if($("#input_8").val() != -1) {
        designSelected = true
      }
      else {
        designSelected = false
      }
    })

    $("#input_10").on('change', function () {
      if($("#input_10").val() != '') {
        fileSelected = true
      }
      else {
        fileSelected = false
      }
    })

    function validate() {

       if(!designSelected || (fileSelected && paste) || (!fileSelected && !paste)) {
          valid = false;
          alert("Problems")
       }
       else {
          valid = true
       }

       return valid
    }

    
    
    // This bit is only for positioning - not necessary
      var loaderObj = document.getElementById("canvasLoader");
      loaderObj.style.position = "relative";
      loaderObj.style["top"] = 10 + "px";
      loaderObj.style["left"] = 0 + "px";
    </script>
</div>

</body>

</html>